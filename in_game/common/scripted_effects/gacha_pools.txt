﻿gacha_pool_5star_limited = {
    gacha_create_xinhai_effect = yes
}

# 5星常驻池 (自动生成)
gacha_pool_5star_standard = {
    set_variable = { name = gacha_5star_choice value = var:gacha_rand }
    change_variable = { name = gacha_5star_choice add = var:gacha_total_rolls }
    
    # 取模 87
    while = {
        limit = { var:gacha_5star_choice >= 8 }
        change_variable = { name = gacha_5star_choice subtract = 7 }
    }
    
    if = { limit = { var:gacha_5star_choice = 0 } gacha_create_xinhai_effect = yes }
    else_if = { limit = { var:gacha_5star_choice = 1 } gacha_create_raiden_effect = yes }
    else_if = { limit = { var:gacha_5star_choice = 2 } gacha_create_furina_effect = yes }
    else_if = { limit = { var:gacha_5star_choice = 3 } gacha_create_keqing_effect = yes }
    else_if = { limit = { var:gacha_5star_choice = 4 } gacha_create_hutao_effect = yes }
    else_if = { limit = { var:gacha_5star_choice = 5 } gacha_create_klee_effect = yes }
    else_if = { limit = { var:gacha_5star_choice = 6 } gacha_create_nahida_effect = yes }
    else = { gacha_create_fischl_effect = yes }
    remove_variable = gacha_5star_choice
}



# 4 星奖励池：金币 / 威望 / 正统性 / 稳定度
# 使用当前抽卡的随机数来决定奖励类型
gacha_pool_4star_rewards = {
    # 使用gacha_rand的模3来决定奖励类型
    set_variable = { name = gacha_4star_choice value = var:gacha_rand }
    change_variable = { name = gacha_4star_choice add = var:gacha_total_rolls }
    change_variable = { name = gacha_4star_choice add = var:gacha_pity_count }

    # 取模 4（最多 2-3 次循环）
    while = {
        limit = { var:gacha_4star_choice >= 4 }
        change_variable = { name = gacha_4star_choice subtract = 4 }
    }

    # 记录奖励类型，事件用来展示
    set_variable = { name = gacha_last_4star_reward value = var:gacha_4star_choice }

    if = {
        limit = { var:gacha_4star_choice = 0 }
        add_gold = 240
    }
    else_if = {
        limit = { var:gacha_4star_choice = 1 }
        add_prestige = 8
    }
    else_if = {
        limit = { var:gacha_4star_choice = 2 }
        add_legitimacy = 8
    }
    else = {
        # choice = 3，稳定度
        add_stability = 4
    }

    remove_variable = gacha_4star_choice
}

# 3 星占位池：无奖励（仅维持结构）
gacha_pool_3star_empty = { }

